<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Muhammad Collections | Luxury Portal</title>
    
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

    <style>
        :root {
            --gold: #d4af37;
            --dark-bg: #0f0f0f;
            --glass: rgba(255, 255, 255, 0.05);
        }

        body {
            background: radial-gradient(circle at top, #1a1a1a, #000);
            color: #fff;
            font-family: 'Cinzel', serif; /* Elegant Serif Font */
            margin: 0;
            display: flex;
            justify-content: center;
            padding: 20px;
        }

        .main-wrapper {
            width: 100%;
            max-width: 450px;
            background: var(--glass);
            backdrop-filter: blur(15px);
            border: 1px solid rgba(212, 175, 55, 0.3);
            border-radius: 30px;
            padding: 40px 20px;
            box-shadow: 0 25px 50px rgba(0,0,0,0.5);
        }

        .logo-box {
            text-align: center;
            margin-bottom: 30px;
        }

        .logo-box img {
            width: 90px;
            height: 90px;
            border-radius: 50%;
            border: 2px solid var(--gold);
            padding: 5px;
            box-shadow: 0 0 15px var(--gold);
        }

        h2 {
            color: var(--gold);
            text-align: center;
            letter-spacing: 4px;
            font-size: 1.4em;
            margin: 10px 0;
        }

        /* Unique Input Styling */
        .input-group { margin-bottom: 20px; }
        label { font-size: 0.75em; color: var(--gold); letter-spacing: 2px; margin-bottom: 8px; display: block; }
        
        input, select {
            width: 100%;
            background: rgba(255,255,255,0.05);
            border: none;
            border-bottom: 1px solid #444;
            padding: 12px;
            color: white;
            font-size: 1em;
            transition: 0.4s;
        }

        input:focus { outline: none; border-bottom: 1px solid var(--gold); background: rgba(255,255,255,0.1); }

        /* Elegant Buttons */
        .btn-gold {
            background: linear-gradient(45deg, #b8860b, #ffd700);
            color: #000;
            border: none;
            padding: 18px;
            border-radius: 50px;
            width: 100%;
            font-weight: 800;
            text-transform: uppercase;
            cursor: pointer;
            margin-top: 25px;
            box-shadow: 0 10px 20px rgba(212, 175, 55, 0.3);
        }

        /* Luxury Slip Styling */
        #orderSlip {
            background: #fff;
            color: #000;
            padding: 30px;
            border-radius: 5px;
            position: relative;
        }
        
        .slip-border { border: 1px solid #000; padding: 10px; }
        .watermark { position: absolute; top: 40%; left: 10%; font-size: 3em; color: rgba(0,0,0,0.05); transform: rotate(-20deg); }

        .hidden { display: none; }
    </style>
</head>
<body>

<div class="main-wrapper">
    <div class="logo-box">
        <img src="https://i.postimg.cc/tJ94S8rT/logo.jpg" alt="Logo">
        <h2>MUHAMMAD<br>COLLECTIONS</h2>
    </div>

    <div id="formView">
        <div class="input-group">
            <label>CLIENT NAME</label>
            <input type="text" id="name" placeholder="John Doe">
        </div>

        <div class="input-group">
            <label>FABRIC SELECTION</label>
            <select id="color">
                <option>Black Gul Ahmed</option>
                <option>Navy Blue Boski</option>
                <option>Seafoam Green Boski</option>
                <option>Beige Boski</option>
                <option>Cream/Classic Boski</option>
            </select>
        </div>

        <div style="display: flex; gap: 15px;">
            <div style="flex: 2;">
                <label>CUTTING (METERS)</label>
                <select id="length">
                    <option value="4.0" data-price="2400">4.0m (Standard)</option>
                    <option value="4.5" data-price="2600" selected>4.5m (Large)</option>
                    <option value="5.0" data-price="2800">5.0m (XL)</option>
                </select>
            </div>
            <div style="flex: 1;">
                <label>QTY</label>
                <input type="number" id="qty" value="1" min="1">
            </div>
        </div>

        <div class="input-group">
            <label>DESTINATION ADDRESS</label>
            <input type="text" id="address" placeholder="City, Area, House">
        </div>

        <div class="input-group">
            <label>PRIVATE PROMO CODE</label>
            <input type="text" id="promo" placeholder="Enter Code">
        </div>

        <button class="btn-gold" onclick="processOrder()">REQUEST INVOICE</button>
    </div>

    <div id="slipView" class="hidden">
        <div id="captureArea" style="padding: 10px; background: #000;">
            <div id="orderSlip">
                <div class="watermark">MUHAMMAD</div>
                <center>
                    <h4 style="margin:0; letter-spacing: 2px;">CERTIFIED INVOICE</h4>
                    <small>REF: <span id="slipID"></span></small>
                </center>
                <hr>
                <p><strong>Customer:</strong> <span id="resName"></span></p>
                <p><strong>Fabric:</strong> <span id="resColor"></span> (<span id="resLen"></span>)</p>
                <p><strong>Quantity:</strong> <span id="resQty"></span></p>
                <div style="background: #f0f0f0; padding: 15px; margin-top: 20px;">
                    <h3 style="margin:0; text-align: center;">TOTAL: <span id="resTotal"></span></h3>
                </div>
            </div>
        </div>

        <button class="btn-gold" onclick="downloadSlip()" style="background: #333; color: #fff;">DOWNLOAD SLIP</button>
        <button class="btn-gold" onclick="sendToWhatsApp()">CONFIRM ON WHATSAPP</button>
        
        <p style="font-size: 0.7em; text-align: center; color: var(--gold); margin-top: 20px;">
            ðŸ”„ 3-Day Exchange Policy applies. Fee: 135 PKR.
        </p>
    </div>
</div>

<script>
    const CONFIG = {
        PUBLIC_KEY: "qLN3VE09GqCkYt_pT",
        SERVICE_ID: "service_oftxa1f",
        TEMPLATE_ID: "template_mar3ztq",
        PHONE: "923172582336"
    };

    (function() { emailjs.init(CONFIG.PUBLIC_KEY); })();

    function processOrder() {
        const name = document.getElementById('name').value;
        const addr = document.getElementById('address').value;
        const qty = parseInt(document.getElementById('qty').value);

        if(!name || !addr) { alert("Details missing!"); return; }

        const lenEl = document.getElementById('length');
        const base = parseInt(lenEl.options[lenEl.selectedIndex].getAttribute('data-price'));
        const promo = document.getElementById('promo').value;
        
        const validCodes = ["19081", "19161", "19129", "19009", "19067"];
        const price = (validCodes.includes(promo)) ? (base - 600) : base;
        const total = price * qty;

        document.getElementById('slipID').innerText = 'MC-' + Math.floor(Math.random()*9000);
        document.getElementById('resName').innerText = name;
        document.getElementById('resColor').innerText = document.getElementById('color').value;
        document.getElementById('resLen').innerText = lenEl.value + 'm';
        document.getElementById('resQty').innerText = qty;
        document.getElementById('resTotal').innerText = total.toLocaleString() + ' PKR';

        document.getElementById('formView').classList.add('hidden');
        document.getElementById('slipView').classList.remove('hidden');
    }

    function downloadSlip() {
        html2canvas(document.getElementById('captureArea')).then(canvas => {
            const link = document.createElement('a');
            link.download = 'Muhammad-Collection-Slip.png';
            link.href = canvas.toDataURL();
            link.click();
        });
    }

    function sendToWhatsApp() {
        const orderId = document.getElementById('slipID').innerText;
        const total = document.getElementById('resTotal').innerText;
        
        emailjs.send(CONFIG.SERVICE_ID, CONFIG.TEMPLATE_ID, {
            order_id: orderId,
            customer_name: document.getElementById('resName').innerText,
            customer_address: document.getElementById('address').value,
            fabric_color: document.getElementById('resColor').innerText,
            cutting: document.getElementById('resLen').innerText,
            quantity: document.getElementById('resQty').innerText,
            final_bill: total
        });

        const text = `*Luxury Order Request: ${orderId}*%0A` +
                     `Total: ${total}%0A` +
                     `Confirming order from boutique portal.`;
        window.open(`https://wa.me/${CONFIG.PHONE}?text=${text}`, '_blank');
    }
</script>

</body>
</html>
